<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us</title>
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <link rel="icon" type="image/png" href="images/farmsappfav.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans&family=Noto+Sans+Kannada&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap"
      rel="stylesheet"
    />
    <script src="main.js"></script>
    <style>
      @media (max-width: 800px) {
        .text {
          font-size: 0.5rem;
        }
        .section {
          margin-left: 1% !important;
          margin-right: 1% !important;
        }
        .dataDefImg {
          width: 20px !important;
          height: 20px !important;
        }
        .service {
          display: block !important;
          flex-direction: initial !important;
          gap: 0px !important;
          margin-right: 1% !important;
          margin-left: 1% !important;
        }
        .service1 {
          display: flex;
        }
        .service2 {
          display: flex;
        }
        .service2Sec {
          align-self: flex-end;
        }
        .service img {
          height: 200px !important;
        }
        .subSec {
          display: block !important;
        }
        .subSecImg {
          width: 100% !important;
        }
        .grid-container {
          grid-template-columns: 0 !important;
          grid-template-rows: 130px 118px 150px 99px 126px !important;
          margin-left: 1% !important;
          justify-content: center !important;
        }
        .footSec {
          display: block !important;
        }
        div div div div:nth-child(2) p {
          font-size: 12px !important;
        }
        div div div div p {
          font-size: 12px !important;
        }
        .footer-section {
          height: 110px !important;
          justify-content: center !important;
          align-items: center !important;
        }
        .footDiv {
          padding: 0px !important;
        }
        div div div div:nth-child(2) {
          padding-left: 0% !important;
        }
        .footer-data {
          align-items: center !important;
        }
      }

      .footer-section {
        display: flex;
        flex-direction: column;
        color: #ffffff;
        flex-wrap: wrap-reverse;
        height: 200px;
        justify-content: flex-end;
        align-items: flex-end;
        margin-left: 0px;
        padding-left: 0px;
      }

      .footer-section h3,
      div {
        margin-bottom: 0px;
        /* margin-left: 13px; */
      }

      .footer-section:nth-child(1) > img {
        width: 35%;
        padding: 0px;
        margin: 0px;
      }

      .footer-section > * {
        margin-top: 0px;
      }

      .footer-data {
        display: flex;
        flex-direction: row;
      }

      .footer-data img {
        width: 20px;
        height: 20px;
        margin-top: 3px;
      }

      .footer-data > p:nth-of-type(1) {
        color: #ffffff;
        text-align: left;
        margin-top: 0px;
        padding-top: 0px;
      }

      .footer-section:nth-child(2) {
        margin: 0px;
        padding: 0px;
        /* margin-left: 300px; */
      }

      .footer-section:nth-child(2) > div > img {
        padding-right: 3px;
        width: 20px;
        height: 20px;
      }

      .footer-section:nth-child(2) > div > p {
        margin: 0px;
        padding: 0px;
      }

      .footer-section:nth-child(1) > div > p {
        margin: 0px;
        padding: 0px;
      }
      .footer-data > p > a {
        color: #ffffff;
        text-decoration: none;
      }
      .footDiv {
        background-color: #283646;
        height: 250px;
        display: flex;
        flex-direction: column;
        padding: 50px;
      }
      .footSec {
        display: flex;
        flex-direction: row;
      }
      .footHr {
        flex: 0.01;
      }
      hr {
        width: 70%;
        background-color: #cdcdcd;
        padding: 1px;
        margin-top: 50px;
        margin-bottom: 50px;
        border-radius: 50px;
        border-style: none;
      }

      div div div div p {
        color: #3d3d3d;
        font-size: x-large;
        text-align: left;
        margin-top: 0px;
        padding-top: 0px;
      }
      p,
      pre,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Nunito Sans", sans-serif;
      }

      .containerContactUS {
        max-width: 65%;
        margin: 0 auto;
        font-family: Arial, sans-serif;
      }
      .containerContactUS h2 {
        text-align: center;
        margin: 2%;
      }
      .containerContactUS label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        font-size: 13px;
      }
      .containerContactUS input,
      .containerContactUS textarea {
        width: 97.2%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .containerContactUS select {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .containerContactUS button {
        padding: 10px 20px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-bottom: 4%;
        width: 100%;
      }
      .containerContactUS button:hover {
        background-color: #218838;
      }
      .error {
        color: red;
      }
      .success {
        color: green;
      }

      .headerNameContact {
        color: #008c44;
      }

      .header {
        width: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
      }
      .imgLogo {
        width: 20%;
        /* margin-left: 3%; */
      }
      .jaikisaanLogo {
        width: 10%;
        margin-right: 3%;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <img
        src="./images/logos/farmsapp-logo.png"
        alt="FarmsApp Logo"
        class="imgLogo"
      />
      <img src="./images/jaikisaan-logo.png" class="jaikisaanLogo" />
    </div>
    <div class="containerContactUS">
      <h2 class="headerNameContact">Contact Us</h2>
      <p id="successMessage" class="success"></p>
      <p id="errorMessage" class="error"></p>
      <form id="contactForm">
        <div>
          <label for="userName">Name:</label>
          <input type="text" id="userName" name="userName" required />
          <p id="errorUserName" class="error"></p>
        </div>
        <div>
          <label for="email">Email ID (optional):</label>
          <input
            type="email"
            id="email"
            name="email"
            oninput="validateEmail()"
          />
          <p id="errorEmail" class="error"></p>
        </div>
        <div>
          <label for="phone">Phone Number:</label>
          <input
            type="tel"
            id="phone"
            name="phone"
            oninput="validatePhone()"
            maxlength="10"
            required
          />
          <p id="errorPhone" class="error"></p>
        </div>
        <div>
          <label for="queryType">Query Type:</label>
          <select id="queryType" name="queryType" required>
            <option value="">Select a query type</option>
            <option value="1">Product Enquiry</option>
            <option value="2">Raise Dispute</option>
            <option value="3">Order Details</option>
            <option value="4">Account Deletion</option>
          </select>
          <p id="errorQueryType" class="error"></p>
        </div>
        <div>
          <label for="query">Query:</label>
          <textarea id="query" name="query" required></textarea>
          <p id="errorQuery" class="error"></p>
        </div>
        <button type="submit">Submit</button>
      </form>
    </div>

    <div class="footDiv">
      <div class="footSec">
        <div class="footer-section">
          <img
            src="./images/farmsapp.png"
            style="cursor: pointer"
            onclick="window.location.href='index.html';"
          />
          <h3>Zuari Farmhub Limited</h3>
          <div class="footer-data">
            <img src="./images/location.png" />
            <p>
              Prestige Ferozes, 3rd Floor, No. 74, Cunningham Road, Bengaluru -
              560052
            </p>
          </div>
        </div>

        <div class="footer-section">
          <div class="footer-data">
            <img src="./images/phone.png" />
            <p>+91 80 6985 7000</p>
          </div>
          <div class="footer-data">
            <img src="./images/message.png" />
            <p>support.farmsapp@adventz.com</p>
          </div>
          <div class="footer-data">
            <img src="./images/browser.png" />
            <p>
              <a href="https://zuarifarmhub.com/overview" target="_blank"
                >https://zuarifarmhub.com/overview
              </a>
            </p>
          </div>
          <div class="footer-data">
            <p>
              <a href="privacy-policy.html" target="_blank"
                >Privacy and Policy
              </a>
            </p>
          </div>
          <div class="footer-data">
            <p>
              <a href="ContactUs.html" target="_blank">Contact US </a>
            </p>
          </div>
        </div>
      </div>

      <hr class="footHr" />
    </div>

    <script>
      function validatePhone() {
        const phoneInput = document.getElementById("phone");
        const errorPhone = document.getElementById("errorPhone");

        // Remove any non-digit characters
        phoneInput.value = phoneInput.value.replace(/\D/g, "");

        // Validate if the length of the phone number is 10
        if (phoneInput.value.length !== 10) {
          errorPhone.textContent = "Phone number must be exactly 10 digits.";
        } else {
          errorPhone.textContent = ""; // Clear error if valid
        }
      }

      function validateEmail() {
        const emailInput = document.getElementById("email");
        const errorEmail = document.getElementById("errorEmail");

        // If email is empty, clear the error and exit
        if (emailInput.value === "") {
          errorEmail.textContent = "";
          return;
        }

        // Regular expression to validate email
        const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;

        if (!emailRegex.test(emailInput.value)) {
          errorEmail.textContent = "Please enter a valid email address.";
        } else {
          errorEmail.textContent = ""; // Clear error if valid
        }
      }

      const apiEndpoint = "https://dev.kiosk.farm/kisaan/companion/v1/query";

      document
        .getElementById("contactForm")
        .addEventListener("submit", async function (event) {
          event.preventDefault();

          // Clear previous messages
          document.getElementById("successMessage").textContent = "";
          document.getElementById("errorMessage").textContent = "";
          document.getElementById("errorUserName").textContent = "";
          document.getElementById("errorPhone").textContent = "";
          document.getElementById("errorQueryType").textContent = "";
          document.getElementById("errorQuery").textContent = "";

          const formData = {
            userName: document.getElementById("userName").value.trim(),
            email: document.getElementById("email").value.trim(),
            phone: document.getElementById("phone").value.trim(),
            queryType: parseInt(document.getElementById("queryType").value, 10), // Parse queryType as a number
            query: document.getElementById("query").value.trim(),
          };

          // Validate form data
          let hasError = false;

          // Name validation
          if (!formData.userName) {
            document.getElementById("errorUserName").textContent =
              "Name is required.";
            hasError = true;
          }

          // Phone number validation
          const phoneRegex = /^[0-9]{10}$/; // Matches exactly 10 digits
          if (!phoneRegex.test(formData.phone)) {
            document.getElementById("errorPhone").textContent =
              "Phone number must be 10 digits.";
            hasError = true;
          }

          // Email validation (optional field)
          if (formData.email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Matches proper email format
            if (!emailRegex.test(formData.email)) {
              document.getElementById("errorMessage").textContent =
                "Please enter a valid email address.";
              hasError = true;
            }
          }

          // Query type validation
          if (isNaN(formData.queryType)) {
            document.getElementById("errorQueryType").textContent =
              "Query type is required.";
            hasError = true;
          }

          // Query validation
          if (!formData.query) {
            document.getElementById("errorQuery").textContent =
              "Please enter your query.";
            hasError = true;
          }

          if (hasError) return;

          // API Request
          try {
            const myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");
            myHeaders.append("Authorization", "Basic NTAwNTYzMzpwYXNzd29yZA==");
            myHeaders.append(
              "Cookie",
              "JSESSIONID=285383407CBD6CDAEB799ED3412518A2; JSESSIONID=4405D7272656CB1D97985EFF862A0A15"
            );

            const raw = JSON.stringify({
              queryType: formData.queryType,
              name: formData.userName,
              email: formData.email,
              mobileNumber: formData.phone,
              query: formData.query || null, // Allow query to be null if empty
            });

            const requestOptions = {
              method: "POST",
              headers: myHeaders,
              body: raw,
              redirect: "follow",
            };

            const response = await fetch(apiEndpoint, requestOptions);

            if (response.ok) {
              document.getElementById("successMessage").textContent =
                "Your request has been submitted successfully.";
              document.getElementById("contactForm").reset();
            } else {
              const errorData = await response.json();
              document.getElementById("errorMessage").textContent =
                errorData.message || "Something went wrong. Please try again.";
            }
          } catch (error) {
            console.error(error);
            document.getElementById("errorMessage").textContent =
              "Network error occurred. Please try again later.";
          }
        });
    </script>
  </body>
</html>
